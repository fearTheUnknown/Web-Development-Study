<!DOCTYPE html>
<html>
  <head>
    <title>JQuery Code Player</title>
    <script type="text/javascript" src="jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="jquery-ui-1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="jquery-ui-1.12.1/jquery-ui.css" />

    <style type="text/css">
      #header {
        background-color: #f0eff1;
        height: 50px;
      }

      #headerTitle {
        margin-top: 10px;
        margin-left: 10px;
        display: inline-block;
      }

      #buttonWrapper {
        display: inline-block;
        margin-left: 37%;
        margin-top: 3px;
      }

      #buttonWrapper .button {
        height: 40px;
        width: auto;
        font-weight: 600;
        font-size: medium;
      }

      #htmlConsolePanel {
        width: 24.3%;
        height: 100%;
        float: left;
        resize: none;
      }

      #cssConsolePanel {
        width: 24.3%;
        height: 100%;
        float: left;
        resize: none;
      }

      #javascriptConsolePanel {
        width: 24.3%;
        height: 100%;
        float: left;
        resize: none;
      }

      #outputConsolePanel {
        width: 24.3%;
        height: 100%;
        float: left;
        border-style:groove;
        border-width: 1px;
      }

      html,
      body {
        margin: 0 0;
        height: 100%;
      }
    </style>
  </head>

  <body>
    <div id="header">
      <h2 id="headerTitle">CodePlayer</h2>
      <div id="buttonWrapper">
        <button class="button" id="htmlButton">HTML</button>
        <button class="button" id="cssButton">CSS</button>
        <button class="button" id="javascriptButton">Javascript</button>
        <button class="button" id="outputButton">Output</button>
      </div>
    </div>

    <div id="consoleWrapper">
      <textarea id="htmlConsolePanel"></textarea>
      <textarea id="cssConsolePanel"></textarea>
      <textarea id="javascriptConsolePanel"></textarea>
      <iframe id="outputConsolePanel"></iframe>
    </div>

    <script type="text/javascript">
      var totalConsoles = [
        "#htmlConsolePanel",
        "#cssConsolePanel",
        "#javascriptConsolePanel",
        "#outputConsolePanel",
      ];

      $("#consoleWrapper").height($("body").height() - $("#header").height());

      $("#htmlButton").click(function () {
        $("#htmlConsolePanel").toggle();

        var availableConsoles = $("#consoleWrapper :visible").length;
        var widthRatio = Math.floor(100 / availableConsoles) - 0.6;

        for (console of totalConsoles) {
          if (console == "#htmlConsolePanel") {
            continue;
          } else {
            $(console).width(widthRatio + "%");
          }
        }
      });

      $("#cssButton").click(function () {
        $("#cssConsolePanel").toggle();

        var availableConsoles = $("#consoleWrapper :visible").length;
        var widthRatio = Math.floor(100 / availableConsoles) - 0.6;

        for (console of totalConsoles) {
          if (console == "#cssConsolePanel") {
            continue;
          } else {
            $(console).width(widthRatio + "%");
          }
        }
      });

      $("#javascriptButton").click(function () {
        $("#javascriptConsolePanel").toggle();

        var availableConsoles = $("#consoleWrapper :visible").length;
        var widthRatio = Math.floor(100 / availableConsoles) - 0.6;

        for (console of totalConsoles) {
          if (console == "#javascriptConsolePanel") {
            continue;
          } else {
            $(console).width(widthRatio + "%");
          }
        }
      });

      $("#outputButton").click(function () {
        $("#outputConsolePanel").toggle();

        var availableConsoles = $("#consoleWrapper :visible").length;
        var widthRatio = Math.floor(100 / availableConsoles) - 0.6;

        for (console of totalConsoles) {
          if (console == "#outputConsolePanel") {
            continue;
          } else {
            $(console).width(widthRatio + "%");
          }
        }
      });

      $("textarea").bind("input propertychange", function () {
        $("#outputConsolePanel")
          .contents()
          .find("body")
          .html("<html>" + "<style type='text/css'>" + $("#cssConsolePanel").val() +"</style>"+$("#htmlConsolePanel").val() + "<script>" + $("#javascriptConsolePanel").val() +"<\/script>" + "</html>");
      });
    </script>
  </body>
</html>
